<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link href="https://fonts.googleapis.com/css?family=Maven+Pro:400,500&amp;subset=latin-ext,vietnamese" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Dancing+Script:400,700&amp;subset=vietnamese" rel="stylesheet">
  <meta name="google-site-verification" content="8zqeFQNuNAWS7ye6oN69hdEeYC_RsDyAlhht79xtAQo" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="/build-notes/assets/img/banner.png" />

  

  <title>
    
      Cudf | BUILD Notes
    
  </title>

  

  <!-- page's cover -->
  
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="1234">
    <meta property="og:image:height" content="592">
  

  

  <link rel="shortcut icon" type="image/x-icon" href="/build-notes/assets/img/favicon.ico">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/css/materialize.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="/build-notes/assets/css/main.css">
  <link rel="stylesheet" href="/build-notes/assets/css/thi_scss.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@200;400;600&display=swap" rel="stylesheet"> 

  
    
      <link rel="stylesheet" href="/build-notes/assets/css/post.css">
    
  

  

  <link rel="stylesheet" href="/build-notes/assets/css/syntax.css">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/build-notes/feed.xml">
  <link rel="sitemap" type="application/xml" title="Sitemap" href="/build-notes/sitemap.xml">
  
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Cudf" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="CUDF" />
<meta property="og:description" content="CUDF" />
<link rel="canonical" href="/build-notes/terms/cudf" />
<meta property="og:url" content="/build-notes/terms/cudf" />
<meta property="og:site_name" content="BUILD Notes" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Cudf" />
<script type="application/ld+json">
{"url":"/build-notes/terms/cudf","@type":"WebPage","description":"CUDF","headline":"Cudf","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
	<header>
  
    <div class="container">
  <a href="#" data-activates="slide-out" class="button-collapse top-nav full hide-on-large-only">
    <i class="material-icons">menu</i>
  </a>
</div>
<div id="slide-out" class="side-nav fixed">
  <div>
    <div class="userView thi-userView">
      <div class="background"></div>
        <a href="/build-notes/">
          <img style="display:inherit;" class="circle z-depth-2" src="/build-notes/assets/img/napkins.png">
        </a>
      <span style="font-size: larger;" class="white-text name">buildsi/build-notes</span>
      <span class="white-text email"><a style="color: #bdbdbd;" href="https://github.com/buildsi/build-notes"></a></span>
    </div>
  </div>
  <div style="padding: 10px;">
    <form action="/build-notes/search" method="get">
      <input class="search-sidebar" type="search" name="q"  placeholder="search something?" autofocus>
      <input type="submit" value="Search" style="display: none;">
    </form>
  </div>
  <div id="toc-bar">
    <div class="toc-bar-title">
      Terms
    </div>
    <ul>
    <li><a href="/build-notes/terms/Cudf">Cudf</a></li>
    </ul>
  </div>
</div>

  
</header>
<main>
  <div class="container">
    <div id="post-info">
      <h3>Cudf</h3>
      <span>
        Posted on
        <span style="display: initial;" class="cat-class"></span>
        | <a style="float:right" href="https://github.com/buildsi/build-notes/edit/main/_terms/cudf.md" target="_blank">üóíÔ∏è Edit on GitHub</a>
      </span>
    </div>

    <div class="divider"></div>
    <div class="row thi-post">
      <div class="col s12">
        <h2 id="cudf">CUDF</h2>

<p><a href="https://www.mancoosi.org/cudf/">CUDF</a> means ‚ÄúCommon Upgradeable Description Format‚Äù and it comes
down to being a text file that describes how user preferences map into update actions. I tend to think of it as
an upgrade problem encoded in a text file, or the input/output format for package managers (such as MPM)
to represent an upgrade scenario. The paper <a class="citation" href="#abate2020dependency">[1]</a> calls CUDF:</p>

<blockquote><p>a lingua franca between package managers and solvers</p><cite><a class="citation" href="#abate2020dependency">[1]</a></cite></blockquote>

<p>And in an earlier paper, the same authors defined CUDF as:</p>

<blockquote><p>A format to encode upgrade problems which is recognized by several specialised dependency solvers, and allows users to express complex scenarios in awell defined and compact way by means of preferences that are passed over to the external solver.</p><cite><a class="citation" href="#abate+:ocaml14-pkg-manager-prefs">[2]</a></cite></blockquote>

<p>The paper <a class="citation" href="#abate-2013-modular-package-manager">[3]</a> referes to it as a DSL (Domain Specific Language).
There is a nice primer <a href="https://www.mancoosi.org/cudf/primer/">here</a>. But TLDR, it looks like a flattened yaml file with a list of packages, conflicts, and other metadata.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">package</span><span class="pi">:</span> <span class="s">m4</span>
<span class="na">version</span><span class="pi">:</span> <span class="m">3</span>
<span class="na">depends</span><span class="pi">:</span> <span class="s">libc6 &gt;= </span><span class="m">8</span>

<span class="na">package</span><span class="pi">:</span> <span class="s">openssl</span>
<span class="na">version</span><span class="pi">:</span> <span class="m">11</span>
<span class="na">depends</span><span class="pi">:</span> <span class="s">libc6 &gt;= 18, libssl0.9.8 &gt;= 8, zlib1g &gt;= </span><span class="m">1</span>
<span class="na">conflicts</span><span class="pi">:</span> <span class="s">ssleay &gt;= </span><span class="m">1</span>
</code></pre></div></div>

<h3 id="principles-of-design">Principles of Design</h3>

<h4 id="platform-independence">Platform independence</h4>

<p>CUDF is agnostic to component models, version schemas, how dependencies are specified, and the package manager.</p>

<h4 id="solver-independence">Solver independence</h4>

<p>CUDF should be able to function as input for many different kinds of solvers.</p>

<h4 id="readability">Readability</h4>

<p>The text format (example above) is simple and easy to read.</p>

<h4 id="extensibility">Extensibility</h4>

<p>CUDF represents core properties needed to perform some kind of update (see the text file above)
but if additional ones are wanted (e.g., package size, bugs) the authors mention that 
‚Äúcustom properties‚Äù can be defined.</p>

<p class="thi-tip"><i class="material-icons mat-icon">info</i>If we do work on a solver, would we use CUDF and just add additional properties? E.g., ABI compatibility</p>

<p>See the <a href="/build-notes/notes/containers#bootstrap-cudf">containers</a> idea section for this idea.</p>

<h4 id="formal-semantics">Formal Semantics</h4>

<p>There seem to be a formal set of semantics to describe an upgrade scenario, specific to CUDF, including:</p>

<ul>
  <li>sections called the <strong>preamble</strong>, component <strong>universe</strong> and <strong>request</strong></li>
  <li>package</li>
  <li>version</li>
  <li>depends</li>
  <li>conflicts</li>
  <li>provides</li>
  <li>installed</li>
  <li>keep</li>
</ul>

<p>Most of these are self explanatory! See page 10 of <a class="citation" href="#abate-2013-modular-package-manager">[3, P. 10]</a>
for full definitions.</p>

<h3 id="expressiveness">Expressiveness</h3>

<p>CUDF sits between the package manager (a sort of client) and the dependency solvers, so it should
have adapters for different distributions (e.g., we already have Debian, RPM, Eclipse).</p>

<h3 id="implementations-and-tools">Implementations and Tools</h3>

<ul>
  <li><a href="https://gforge.inria.fr/scm/?group_id=4385">libcudf</a> is a reference implementation that has parsing and ‚Äúpretty-printing‚Äù for CUDF. This means the tool can identify if a CUDF document satifies abundance and peace scenarios (see <a href="/build-notes/notes/flow">flow</a>) and if a solution is valid. There is also a <code class="language-plaintext highlighter-rouge">cudf-check</code> tool that provides the same.</li>
  <li><a href="https://wiki.debian.org/Cupt">CUPT</a> is an apt-compatible package manager for debian that also use CUDF.</li>
</ul>

      </div>
    </div>

    <div class="tag-list">
      
    </div>
    <style type="text/css">
.related-posts{
  border: 3px dotted #2e87e7;
  border-radius: 5px;
  margin: 20px 0;
  padding: 10px 10px 0 10px;
}
.related-posts span{
  font-size: 130%;
  font-weight: 500;
  color: #2e87e7;
}
.related-posts ul{
  margin-top: 5px!important;
}
.thi-icon{
  float: left;
  line-height: inherit;
  margin-right: 5px;
  margin-left: 2px;
  color: #2e87e7;
}
</style>

<div class="related-posts">
  <i class="material-icons thi-icon">grade</i><span>Related Notes</span>
  
  <ul>
    
    

    
    
      
    
  </ul>
</div>

    <form action="/build-notes/search" method="get">
	<input type="search" name="q"  placeholder="Search for..." autofocus>
	<input type="submit" value="Search" style="display: none;">
</form>

  </div>
</main>

	<script src="/build-notes/assets/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript">
  jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
      //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
      offset_opacity = 1200,
      //duration of the top scrolling animation (in ms)
      scroll_top_duration = 700,
      //grab the "back to top" link
      $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
      ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
      // if( $(this).scrollTop() > offset_opacity ) { 
      //  $back_to_top.addClass('cd-fade-out');
      // }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
      event.preventDefault();
      $('body,html').animate({
        scrollTop: 0 ,
        }, scroll_top_duration
      );
    });

  });
</script>
<style type="text/css">
.cd-top {
  display: inline-block;
  height: 50px;
  width: 50px;
  position: fixed;
  bottom: 2%;
  right: 2%;
  border-radius: 40px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
  /* image replacement properties */
  overflow: hidden;
  text-indent: 100%;
  white-space: nowrap;
  background: #bbb url(/build-notes/assets/img/cd-top-arrow.svg) no-repeat center 50%;
  visibility: hidden;
  opacity: 0;
  -webkit-transition: opacity .3s 0s, visibility 0s .3s;
  -moz-transition: opacity .3s 0s, visibility 0s .3s;
  transition: opacity .3s 0s, visibility 0s .3s;
}
.cd-top.cd-is-visible, .cd-top.cd-fade-out, .no-touch .cd-top:hover {
  -webkit-transition: opacity .3s 0s, visibility 0s 0s;
  -moz-transition: opacity .3s 0s, visibility 0s 0s;
  transition: opacity .3s 0s, visibility 0s 0s;
}
.cd-top.cd-is-visible {
  /* the button becomes visible */
  visibility: visible;
  opacity: 1;
}
.cd-top.cd-fade-out {
  /* if the user keeps scrolling down, the button is out of focus and becomes less visible */
  opacity: .5;
}
.no-touch .cd-top:hover {
  background-color: #e86256;
  opacity: 1;
}
</style>

<a href="#0" class="cd-top">Top</a>

	<footer class="page-footer teal">
  <div class="footer-copyright">
    <div class="container text-white">
          <a class="waves-effect" href="/build-notes/tags">Tags</a> | <a class="waves-effect" href="/build-notes/categories">Categories</a> | <a class="waves-effect" href="https://github.com/buildsi/build-notes">GitHub</a>
    </div>
  </div>
</footer>

<script src="//code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/js/materialize.min.js"></script>


  
    <script src="/build-notes/assets/js/post.js"></script>
  



<script src="/build-notes/assets/js/main.js"></script>

</body>
</html>